# è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥ Agent

è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äº**è®ºæ–‡è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥å’Œä¿®æ­£**çš„æ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œæ‰®æ¼”"é€»è¾‘è­¦å¯Ÿ"çš„è§’è‰²ï¼Œç¡®ä¿å…¨æ–‡å›´ç»•æ ¸å¿ƒè®ºç‚¹ï¼Œæ— è‡ªç›¸çŸ›ç›¾ä¹‹å¤„ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç¬¬ä¸€æ­¥ï¼šæç‚¼ä¸»æ—¨
- **æ ¸å¿ƒè®ºç‚¹æå–**ï¼šAgent é€šè¯»å…¨æ–‡æˆ–æ ¸å¿ƒç« èŠ‚ï¼Œæ€»ç»“å‡ºå…¨æ–‡çš„æ ¸å¿ƒè®ºç‚¹ï¼ˆThesis Statementï¼‰
- **è®ºè¯ç»“æ„åˆ†æ**ï¼šæå–æ”¯æ’‘è®ºæ®ã€å…³é”®æ¦‚å¿µã€ç ”ç©¶ç›®æ ‡ç­‰è¦ç´ 

### ç¬¬äºŒæ­¥ï¼šé€ä¸€æ ¡å¯¹
- **ä¸€è‡´æ€§æ£€æŸ¥**ï¼šAgent å¸¦ç€æ ¸å¿ƒè®ºç‚¹ï¼Œé€ä¸€æ£€æŸ¥æ¯ä¸ªç« èŠ‚ã€æ¯ä¸ªæ®µè½çš„åˆ†è®ºç‚¹æ˜¯å¦æœåŠ¡äºã€æˆ–è‡³å°‘ä¸è¿èƒŒæ ¸å¿ƒè®ºç‚¹
- **é—®é¢˜è¯†åˆ«**ï¼šè¯†åˆ«ç›´æ¥çŸ›ç›¾ã€åç¦»ä¸»é¢˜ã€è®ºè¯è–„å¼±ã€è¡¨è¿°ä¸æ¸…ç­‰é—®é¢˜
- **ä¸¥é‡ç¨‹åº¦è¯„çº§**ï¼šæŒ‰ç…§é«˜ã€ä¸­ã€ä½ä¸‰ä¸ªçº§åˆ«å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»

### ç¬¬ä¸‰æ­¥ï¼šæ™ºèƒ½ä¿®æ­£
- **è‡ªåŠ¨ä¿®æ­£**ï¼šæ ¹æ®ä¸€è‡´æ€§æ£€æŸ¥ç»“æœï¼Œé‡æ–°ç”Ÿæˆæˆ–ä¿®æ­£æœ‰é—®é¢˜çš„ç« èŠ‚
- **ä¿æŒç»“æ„**ï¼šç¡®ä¿æ–‡æ¡£ç»“æ„å®Œå…¨ä¸å˜ï¼Œåªä¿®æ­£å†…å®¹
- **è´¨é‡ä¿è¯**ï¼šç”Ÿæˆä¸“ä¸šã€é€»è¾‘æ¸…æ™°çš„ä¿®æ­£å†…å®¹

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ï¼ˆç®€åŒ–çš„3æ­¥æµç¨‹ï¼‰

```mermaid
graph TD
    A[è¾“å…¥æ–‡æ¡£] --> B[thesis_extractor.py]
    B --> C[æ ¸å¿ƒè®ºç‚¹æå–]
    C --> D[thesis_consistency_checker.py]
    D --> E[ä¸€è‡´æ€§æ£€æŸ¥]
    E --> F[document_regenerator.py]
    F --> G[ä¿®æ­£ç« èŠ‚ + ç”Ÿæˆå®Œæ•´æ–‡æ¡£]
    G --> H[ä¿®æ­£åæ–‡æ¡£]
    
    K[run_thesis_checker.py] --> B
    K --> D
    K --> F
```

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ ¸å¿ƒæ¨¡å—
- **`thesis_extractor.py`** - æ ¸å¿ƒè®ºç‚¹æå–å™¨
- **`thesis_consistency_checker.py`** - è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥å™¨  
- **`document_regenerator.py`** - æ–‡æ¡£é‡æ–°ç”Ÿæˆå™¨ï¼ˆä¿®æ­£ç« èŠ‚ + ç”Ÿæˆå®Œæ•´æ–‡æ¡£ï¼‰

### è¿è¡Œè„šæœ¬
- **`run_thesis_checker.py`** - ä¸»è¿è¡Œè„šæœ¬ï¼Œæä¾›å®Œæ•´çš„3æ­¥æµæ°´çº¿

### åŸæœ‰æ–‡ä»¶ï¼ˆå·²æ”¹é€ ï¼‰
- **`document_reviewer.py`** - åŸå†—ä½™æ£€æŸ¥å™¨ï¼ˆä¿ç•™ï¼‰
- **`regenerate_sections.py`** - åŸç« èŠ‚é‡ç”Ÿæˆå™¨ï¼ˆä¿ç•™ï¼‰
- **`update_json_content.py`** - åŸæ›´æ–°å·¥å…·ï¼ˆä¿ç•™ï¼‰

## âš™ï¸ ç¯å¢ƒé…ç½®

### é…ç½®æ–‡ä»¶è®¾ç½®

1. **å¤åˆ¶ç¯å¢ƒé…ç½®æ¨¡æ¿**ï¼š
   ```bash
   cp env_template.txt .env
   ```

2. **ç¼–è¾‘é…ç½®æ–‡ä»¶**ï¼š
   ```bash
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè‡³å°‘éœ€è¦è®¾ç½®ä»¥ä¸‹å¿…éœ€é…ç½®ï¼š
   OPENROUTER_API_KEY=your-actual-api-key-here
   ```

3. **éªŒè¯é…ç½®**ï¼š
   ```bash
   python config.py
   ```

### ä¸»è¦é…ç½®é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `OPENROUTER_API_KEY` | OpenRouter APIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰ | å†…ç½®é»˜è®¤å¯†é’¥ |
| `OPENROUTER_MODEL` | ä½¿ç”¨çš„AIæ¨¡å‹ | `deepseek/deepseek-chat-v3-0324` |
| `DEFAULT_OUTPUT_DIR` | é»˜è®¤è¾“å‡ºç›®å½• | `./thesis_outputs` |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | `INFO` |
| `DEFAULT_AUTO_CORRECT` | æ˜¯å¦é»˜è®¤è‡ªåŠ¨ä¿®æ­£ | `true` |
| `THESIS_EXTRACTION_TEMPERATURE` | è®ºç‚¹æå–æ¸©åº¦å‚æ•° | `0.1` |
| `CONSISTENCY_CHECK_TEMPERATURE` | ä¸€è‡´æ€§æ£€æŸ¥æ¸©åº¦å‚æ•° | `0.1` |
| `CONTENT_CORRECTION_TEMPERATURE` | å†…å®¹ä¿®æ­£æ¸©åº¦å‚æ•° | `0.2` |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šå®Œæ•´æµæ°´çº¿ï¼ˆæ¨èï¼‰

```bash
# åŸºæœ¬ä½¿ç”¨
python run_thesis_checker.py document.md

# æŒ‡å®šè¾“å‡ºç›®å½•å’Œæ ‡é¢˜
python run_thesis_checker.py document.json --title "ç ”ç©¶æŠ¥å‘Š" --output ./results

# åªä¿®æ­£é«˜ä¸¥é‡åº¦é—®é¢˜
python run_thesis_checker.py document.md --severity high

# åªæ£€æŸ¥ä¸ä¿®æ­£
python run_thesis_checker.py document.md --no-auto-correct
```

### æ–¹æ³•äºŒï¼šåˆ†æ­¥æ‰§è¡Œ

#### 1. æå–æ ¸å¿ƒè®ºç‚¹
```python
from thesis_extractor import ThesisExtractor

extractor = ThesisExtractor()
thesis = extractor.extract_thesis_from_document(document_content, "æ–‡æ¡£æ ‡é¢˜")
extractor.save_thesis_statement(thesis, "æ–‡æ¡£æ ‡é¢˜", "thesis_output.json")
```

#### 2. æ£€æŸ¥ä¸€è‡´æ€§
```python
from thesis_consistency_checker import ThesisConsistencyChecker

checker = ThesisConsistencyChecker()
analysis = checker.check_consistency(document_content, thesis, "æ–‡æ¡£æ ‡é¢˜")
checker.save_consistency_analysis(analysis, thesis, "æ–‡æ¡£æ ‡é¢˜", "consistency_output.json")
```

#### 3. ä¿®æ­£æ–‡æ¡£å¹¶ç”Ÿæˆå®Œæ•´ç»“æœ
```python
from document_regenerator import ThesisDocumentRegenerator

regenerator = ThesisDocumentRegenerator()
results = regenerator.regenerate_complete_document(
    analysis_file="consistency_output.json",
    document_file="document.md",
    output_dir="./corrections"
)
```

## ğŸ“Š è¾“å…¥è¾“å‡ºæ ¼å¼

### è¾“å…¥æ ¼å¼
- **Markdownæ–‡æ¡£** (`.md`) - æ ‡å‡†Markdownæ ¼å¼çš„è®ºæ–‡æ–‡æ¡£
- **JSONæ–‡æ¡£** (`.json`) - ç»“æ„åŒ–çš„æ–‡æ¡£æ•°æ®ï¼ŒåŒ…å«`report_guide`ç»“æ„

### è¾“å‡ºæ–‡ä»¶

#### è®ºç‚¹æå–ç»“æœ
- `thesis_statement_*.json` - æ ¸å¿ƒè®ºç‚¹ç»“æ„åŒ–æ•°æ®
- `thesis_report_*.md` - å¯è¯»çš„è®ºç‚¹åˆ†ææŠ¥å‘Š

#### ä¸€è‡´æ€§æ£€æŸ¥ç»“æœ  
- `consistency_analysis_*.json` - ä¸€è‡´æ€§åˆ†æè¯¦ç»†æ•°æ®
- `consistency_report_*.md` - å¯è¯»çš„ä¸€è‡´æ€§æ£€æŸ¥æŠ¥å‘Š

#### ä¿®æ­£ç»“æœ
- `thesis_corrected_complete_document_*.md` - å®Œæ•´çš„ä¿®æ­£åæ–‡æ¡£

## ğŸ”§ é…ç½®è¯´æ˜

### APIé…ç½®
ç³»ç»Ÿä½¿ç”¨OpenRouter APIè°ƒç”¨DeepSeekæ¨¡å‹ï¼Œé»˜è®¤APIå¯†é’¥å·²å†…ç½®ã€‚å¦‚éœ€æ›´æ¢ï¼š

```python
# åœ¨å„ä¸ªç±»çš„åˆå§‹åŒ–ä¸­ä¿®æ”¹api_keyå‚æ•°
extractor = ThesisExtractor(api_key="your-api-key")
checker = ThesisConsistencyChecker(api_key="your-api-key") 
corrector = ThesisCorrector(api_key="your-api-key")
```

### ä¸¥é‡ç¨‹åº¦è¿‡æ»¤
- **high** - ä¸¥é‡å½±å“è®ºæ–‡é€»è¾‘ä¸€è‡´æ€§ï¼Œå¿…é¡»ä¿®æ”¹
- **medium** - ä¸­ç­‰ç¨‹åº¦å½±å“ï¼Œå»ºè®®ä¿®æ”¹  
- **low** - è½»å¾®å½±å“ï¼Œå¯é€‰æ‹©æ€§ä¿®æ”¹

## ğŸ“‹ é—®é¢˜ç±»å‹è¯´æ˜

### 1. ç›´æ¥çŸ›ç›¾ (contradiction)
ç« èŠ‚å†…å®¹ä¸æ ¸å¿ƒè®ºç‚¹æˆ–æ”¯æ’‘è®ºæ®ç›´æ¥å†²çª

### 2. åç¦»ä¸»é¢˜ (irrelevant)  
ç« èŠ‚å†…å®¹ä¸æ ¸å¿ƒè®ºç‚¹æ— å…³æˆ–å…³è”åº¦å¾ˆä½

### 3. è®ºè¯è–„å¼± (weak_support)
ç« èŠ‚å†…å®¹è¯•å›¾æ”¯æŒæ ¸å¿ƒè®ºç‚¹ä½†è®ºè¯ä¸å……åˆ†æˆ–é€»è¾‘ä¸æ¸…

### 4. è¡¨è¿°ä¸æ¸… (unclear)
ç« èŠ‚å†…å®¹æ¨¡ç³Šä¸æ¸…ï¼Œæ— æ³•åˆ¤æ–­å…¶ä¸æ ¸å¿ƒè®ºç‚¹çš„å…³ç³»

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### 1. æ™ºèƒ½è®ºç‚¹æå–
- æ·±åº¦ç†è§£æ–‡æ¡£ç»“æ„å’Œå†…å®¹
- å‡†ç¡®è¯†åˆ«æ ¸å¿ƒè®ºç‚¹å’Œè®ºè¯è¦ç´ 
- æ”¯æŒå¤æ‚å­¦æœ¯æ–‡æ¡£åˆ†æ

### 2. ç²¾å‡†ä¸€è‡´æ€§æ£€æŸ¥
- åŸºäºæ ¸å¿ƒè®ºç‚¹è¿›è¡Œé€ç« èŠ‚æ£€æŸ¥
- è¯†åˆ«å¤šç§ç±»å‹çš„é€»è¾‘é—®é¢˜
- æä¾›è¯¦ç»†çš„é—®é¢˜æè¿°å’Œè¯æ®

### 3. é«˜è´¨é‡å†…å®¹ä¿®æ­£
- ä¿æŒåŸæœ‰æ–‡æ¡£ç»“æ„ä¸å˜
- ç”Ÿæˆä¸“ä¸šã€é€»è¾‘æ¸…æ™°çš„ä¿®æ­£å†…å®¹
- ä¸¥æ ¼è¿‡æ»¤å›¾ç‰‡ã€è¡¨æ ¼ç­‰éæ­£æ–‡å†…å®¹

### 4. å®Œæ•´çš„å¯è¿½æº¯æ€§
- è¯¦ç»†çš„åˆ†æå’Œä¿®æ­£æ—¥å¿—
- ä¿ç•™åŸå§‹é—®é¢˜ä¿¡æ¯
- ç”Ÿæˆå…¨é¢çš„æŠ¥å‘Šå’Œæ‘˜è¦

## ğŸ”„ ä¸åŸæœ‰ç³»ç»Ÿçš„å…³ç³»

æœ¬è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥ç³»ç»Ÿæ˜¯åœ¨åŸæœ‰å†—ä½™æ£€æŸ¥ç³»ç»ŸåŸºç¡€ä¸Šå¼€å‘çš„ï¼š

- **ä¿ç•™åŸåŠŸèƒ½**ï¼šåŸæœ‰çš„å†—ä½™æ£€æŸ¥åŠŸèƒ½å®Œå…¨ä¿ç•™
- **æ‰©å±•æ–°åŠŸèƒ½**ï¼šæ–°å¢è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥åŠŸèƒ½
- **å…±äº«åŸºç¡€è®¾æ–½**ï¼šå…±äº«JSONåˆå¹¶ã€æ–‡æ¡£å¤„ç†ç­‰åŸºç¡€åŠŸèƒ½
- **ç‹¬ç«‹è¿è¡Œ**ï¼šä¸¤å¥—ç³»ç»Ÿå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œäº’ä¸å¹²æ‰°

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æµæ°´çº¿ç¤ºä¾‹
```bash
# å¯¹ç ”ç©¶è®ºæ–‡è¿›è¡Œå®Œæ•´çš„è®ºç‚¹ä¸€è‡´æ€§æ£€æŸ¥
python run_thesis_checker.py research_paper.md --title "äººå·¥æ™ºèƒ½ç ”ç©¶è®ºæ–‡" --output ./ai_paper_results

# åªä¿®æ­£é«˜ä¸¥é‡åº¦å’Œä¸­ç­‰ä¸¥é‡åº¦çš„é—®é¢˜
python run_thesis_checker.py research_paper.md --severity high,medium

# åªè¿›è¡Œæ£€æŸ¥ï¼Œä¸è‡ªåŠ¨ä¿®æ­£
python run_thesis_checker.py research_paper.md --no-auto-correct
```

### æŸ¥çœ‹ç»“æœ
```bash
# æŸ¥çœ‹æµæ°´çº¿æ‘˜è¦
cat ./ai_paper_results/pipeline_summary_research_paper.md

# æŸ¥çœ‹è®ºç‚¹åˆ†æ
cat ./ai_paper_results/thesis_report_research_paper.md

# æŸ¥çœ‹ä¸€è‡´æ€§æ£€æŸ¥æŠ¥å‘Š  
cat ./ai_paper_results/consistency_report_research_paper.md
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIè°ƒç”¨å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤APIå¯†é’¥æœ‰æ•ˆ
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—

2. **æ–‡æ¡£è§£æå¤±è´¥**
   - ç¡®è®¤æ–‡æ¡£æ ¼å¼æ­£ç¡®
   - æ£€æŸ¥æ–‡æ¡£ç¼–ç ï¼ˆåº”ä¸ºUTF-8ï¼‰
   - éªŒè¯JSONç»“æ„å®Œæ•´æ€§

3. **ä¿®æ­£ç»“æœä¸ç†æƒ³**
   - è°ƒæ•´ä¸¥é‡ç¨‹åº¦è¿‡æ»¤å™¨
   - æ£€æŸ¥åŸå§‹æ–‡æ¡£è´¨é‡
   - æŸ¥çœ‹è¯¦ç»†çš„é—®é¢˜æè¿°

### æ—¥å¿—æ–‡ä»¶
- `thesis_consistency_check.log` - å®Œæ•´æµæ°´çº¿æ—¥å¿—
- `thesis_correction.log` - ç« èŠ‚ä¿®æ­£æ—¥å¿—

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. æ—¥å¿—æ–‡ä»¶ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶
3. æœ¬READMEæ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†

---

*æœ¬ç³»ç»Ÿç”±Gauzè®ºç‚¹ä¸€è‡´æ€§Agentæä¾›æŠ€æœ¯æ”¯æŒ*
