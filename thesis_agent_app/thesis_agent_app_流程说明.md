# thesis_agent_app 流程说明（轻技术，重过程）

本文面向非技术读者，侧重端到端流程与业务效果，尽量减少技术细节。它描述 thesis_agent_app 如何围绕“核心论点（Thesis）”进行章节一致性检查与智能修正，并输出可交付的分析报告与修正版文档。

---

## 1. 背景与目标
- 目标：保障长文档（报告/论文/白皮书）在整体论点、章节主题与论证逻辑上的一致性，并对存在问题的段落给出可直接采用的修正稿。
- 范围：面向包含多个章节的小到中等规模文档（例如 10–100 页），强调逻辑一致与主题聚焦，而非语言润色或事实校对。

## 2. 适用场景
- 立项报告、研究综述、技术白皮书等需要围绕统一主张展开的文档。
- 需要在提交前进行“结构化一致性体检”，快速发现并修正偏题、矛盾、论证薄弱等问题。

## 3. 流程总览
- 步骤 1：提取核心论点与论证框架（核心论点、支撑论据、关键概念）
- 步骤 2：逐章一致性检查（识别问题类型、定位证据、提出建议）
- 步骤 3：智能修正（对问题段落进行定向重写，保持风格与结构）
- 步骤 4：输出与交付（分析报告、修正版完整文档、统一结构结果）

## 4. 端到端流程详解
### 4.1 提取核心论点
- 输入：原始文档（纯文本或 Markdown），可附带业务上下文说明（可选）。
- 产出：
  - 核心论点（Main Thesis）：一句或一段清晰陈述的中心主张。
  - 支撑论据（Supporting Arguments）：3–7 个关键支点，说明“为什么成立”。
  - 关键概念（Key Concepts）：在全文中应保持一致的术语与定义。
- 要点：聚焦文字内容，忽略图片、表格等非正文；避免引入文档外事实。

### 4.2 逐章一致性检查
- 方法：逐章对照核心论点与论证框架，检测以下问题类型：
  - 矛盾（Contradiction）：与核心论点或既定论据相冲突。
  - 不相关（Irrelevant）：脱离主题，偏题或掺入无关细节。
  - 论证薄弱（Weak Support）：结论无实质支撑或推理跳跃。
  - 表述不清（Unclear）：核心观点、因果链条不清晰。
- 输出：
  - 章节级分析条目（问题类型、描述、证据片段、建议）。
  - 总览报告（各章节问题汇总与严重度感知）。

### 4.3 智能修正（并行）
- 范围：仅对被标注为“存在问题”的段落进行定向重写，未检出问题的内容保持原样。
- 原则：
  - 保持原章节结构、排版风格与术语一致性。
  - 修正围绕“让该段回到核心论点并强化论证”。
  - 不新增文档外事实；不改变既定数字与引用。
- 策略：对不同章节的问题条目并行处理，提升整体耗时表现；每个条目独立生成修正稿，随后统一合并。
- 容错：若某段修正失败或质量不达标，则保留原文并在报告中标注。

### 4.4 输出与交付
- 一致性分析报告：章节问题清单、证据摘录与修正建议。
- 修正版完整文档：在原结构下融合所有通过质量检查的修正段落。
- 统一结构结果（JSON）：便于外部系统消费（含核心论点、章节分析、修正摘要、交付状态）。

## 5. 输入与输出
- 输入：
  - 原始文档文本（必需）。
  - 文档元信息与业务上下文（可选：目的、读者、关键术语）。
  - 运行参数（并行开关、最大修正数、保守/激进策略等）。
- 输出：
  - 提取结果（核心论点、支撑论据、关键概念）。
  - 章节一致性分析报告（问题类型、描述、证据、建议）。
  - 完整修正版文档（保留原结构，融入修正段落）。
  - 统一结构数据（便于系统集成与指标跟踪）。

## 6. 质量保障与边界
- 不做：事实校对、数据更新、参考文献核查、语言润色（如风格打磨）。
- 保持：术语一致、风格延续、章节结构稳定、已有数据与引用不被篡改。
- 兜底：修正质量不达标则不替换原文，并在报告中透明标注。

## 7. 并发与性能
- 并发粒度：以“问题条目”或“章节”为单位并行修正，加速整体处理。
- 进度跟踪：对每个条目的处理状态进行记录（成功/失败/跳过），便于复核。
- 资源策略：在并发与稳定性之间做权衡，默认设置偏保守，可按任务规模调整。

## 8. 集成与调用（轻技术表述）
- 对外能力：
  - 论点提取接口（提取核心论点与论证框架）。
  - 一致性检查接口（逐章生成问题清单与建议）。
  - 文档修正接口（面向问题段落的定向重写与合并）。
- 部署对接：作为内部模块供路由服务统一暴露为 API；或在本地以脚本方式运行。

## 9. 运行与验证（示例指导）
- API 方式（推荐）：在集成环境通过相应接口完成提取、检查与修正，并以统一结构结果回传。
- 本地脚本方式：在 `e:\gaosi\review_app\thesis_agent_app` 目录下运行本项目内脚本（如 orchestrator），完成端到端流程并生成报告与修正版文档。
- 验证建议：
  - 先选取 1–2 章做小样本验证，观察报告可读性与修正质量。
  - 再扩大到整本文档，并检查术语一致性与章节衔接是否自然。

## 10. 成功标准与业务价值
- 成功标准：
  - 章节主题围绕核心论点显著收敛，矛盾/偏题内容减少。
  - 论证链条更完整，关键支点在各章节得到一致强化。
  - 修正版文档可直接对外使用（无需大幅二次编辑）。
- 业务价值：
  - 提高文档一致性与专业度，降低人工审校成本。
  - 缩短提交流程时间，提升交付确定性与质量稳定性。

---

附注：本文聚焦流程与交付，不涉及模型参数、提示词细节或代码实现；如需技术版说明，可单独提供。